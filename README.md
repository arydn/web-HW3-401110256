# web-HW3-401110256
# ูพุฑูฺูโ ุชุฑุณู ุงุดฺฉุงู ุจุง Reactุ TypeScriptุ Spring Boot ู PostgreSQL

ุงู ูพุฑูฺู ฺฉ ุงูพูฺฉุดู ูุจ ุจุฑุง ุชุฑุณู ู ูุฏุฑุช ุงุดฺฉุงู (ุฏุงุฑูุ ูุฑุจุนุ ูุซูุซ) ุงุณุช ฺฉู ุงุฒ ฺฉ frontend ุฏุฑ React ู ฺฉ backend ุฏุฑ Spring Boot ุงุณุชูุงุฏู ูโฺฉูุฏ. ุฏุงุฏูโูุง ุฏุฑ ูพุงฺฏุงูโุฏุงุฏู PostgreSQL ุฐุฎุฑู ูโุดููุฏ.

---

## ๐ผ๏ธ ุชุบุฑุงุช ู ุชูุณุนูโ ุจุฎุด Frontend ุจุฑุง ุงุชุตุงู ุจู Backend

### ๐ ุณุงุฎุชุงุฑ ูพูุดู `frontend/src`

- `components/`: ุดุงูู ฺฉุงููพูููุชโูุง ูุซู `Canvas`, `Sidebar`, `Header`, `ShapeCounter`
- `context/`: ูุงู `ShapesContext.tsx` ุจุฑุง ูุฏุฑุช global ูุณุช ุงุดฺฉุงู
- `types/`: ุชุนุฑู ููุน ุฏุงุฏูโูุง ูุซู `Shape` ู `ShapeType`
- `styles/`: ุงุณุชุงูโูุง ูุงฺููุงุฑ ูุฎุตูุต ูุฑ ฺฉุงููพูููุช
- `api/`: ๐ **ูพูุดูโ ุฌุฏุฏ ุงุถุงููโุดุฏู** ุจุฑุง ูฺฏูุฏุงุฑ ุชูุงุจุน ุงุฑุชุจุงุท ุจุง Backend (`api.ts`)

---

### โ๏ธ ุชุบุฑุงุช ุงุตู ุจุฑุง ูพุดุชุจุงู ุงุฒ Backend

#### โ 1. ุงูุฒูุฏู ููุฏ ูุฑูุฏ ูุงู ฺฉุงุฑุจุฑ (`username`)

ุฏุฑ ูุงู `Header.tsx`ุ ฺฉ input ุฌุฏุฏ ุงุถุงูู ุดุฏู ุชุง ฺฉุงุฑุจุฑ ุจุชูุงูุฏ ูุงู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ. ุงู ููุฏุงุฑ ุฏุฑ state ุฐุฎุฑู ุดุฏู ู ุจุฑุง ุชูุงุจุน ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ ุจู ุณุฑูุฑ ุงุฑุณุงู ูโุดูุฏ.

```tsx
<input
  type="text"
  className={styles.userInput}
  value={username}
  onChange={(e) => setUsername(e.target.value)}
  placeholder="Username (e.g., user1)"
/>
```

๐ธ ุฏูู:
- ุจู ุงุฒุง ูุฑ ฺฉุงุฑุจุฑุ ฺฉ ููุงุด ุฌุฏุงฺฏุงูู ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู ุฐุฎุฑู ูโุดูุฏ.
- ุงู ุทุฑุงุญ ุณุงุฏู ูุงุฒ ุจู ุงุญุฑุงุฒ ููุช ูุฏุงุฑุฏ ูู ฺูุฏฺฉุงุฑุจุฑู ุจูุฏู ุฑุง ูพุดุชุจุงู ูโฺฉูุฏ.

---

#### ๐พ 2. ุงูุฒูุฏู ุฏฺฉููโูุง ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ ุจู ุณุฑูุฑ

ุฏุฑ ููุงู ูุงู `Header.tsx`ุ ุฏู ุฏฺฉูู ุฌุฏุฏ ุจุฑุง ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ ุชุฑุณูโูุง ุงุฒ ุณุฑูุฑ ุงุถุงูู ุดุฏูโุงูุฏ. ุงู ุฏฺฉููโูุง ุชูุงุจุน `exportToBackend` ู `importFromBackend` ุฑุง ุตุฏุง ูโุฒููุฏ.

```tsx
<button onClick={exportToBackend}>Save to Server</button>
<button onClick={importFromBackend}>Load from Server</button>
```

๐ธ ุนููฺฉุฑุฏ:
- ุฏฺฉููโ Save ุจุง ุงุณุชูุงุฏู ุงุฒ `fetch` ฺฉ ุฏุฑุฎูุงุณุช POST ุจู ุณุฑูุฑ ุงุฑุณุงู ูโฺฉูุฏ ู ุฏุงุฏูโูุง ุฑุง ุฐุฎุฑู ูโฺฉูุฏ.
- ุฏฺฉููโ Load ุจุง ุงุณุชูุงุฏู ุงุฒ `fetch` ฺฉ ุฏุฑุฎูุงุณุช GET ูโูุฑุณุชุฏ ู ูุณุช ุงุดฺฉุงู ุฑุง ุจุงุฒุงุจ ูโฺฉูุฏ.

---

#### ๐ 3. ุงุฌุงุฏ ูุงู ุฌุฏุฏ `api/api.ts` ุจุฑุง ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ

```ts
export const saveDrawing = async (username, drawingName, shapes) => { ... }
export const fetchDrawing = async (username) => { ... }
```

๐ธ ุณุงุฎุชุงุฑ ฺฉู:
- `saveDrawing`: ููุท `type`, `x`, `y` ูุฑ ุดฺฉู ุฑุง ุจู ุณุฑูุฑ ุงุฑุณุงู ูโฺฉูุฏ ู ุงุฒ ุงุฑุณุงู `id` ูุญู ุฌููฺฏุฑ ูโฺฉูุฏ (ุฒุฑุง ุณูุช ุณุฑูุฑุ `id` ุฎูุฏฺฉุงุฑ ุชููุฏ ูโุดูุฏ).
- `fetchDrawing`: ุฏุงุฏูโูุง ุฑุง ุงุฒ ุณุฑูุฑ ุฏุฑุงูุช ฺฉุฑุฏู ู ุจู ุณุงุฎุชุงุฑ ุณุงุฒฺฏุงุฑ ุจุง context ุฏุฑ frontend ุชุจุฏู ูโฺฉูุฏ.

๐ธ ูุฒุงุง:
- ุฌุฏุง ฺฉุฑุฏู ููุทู API ุงุฒ ููุทู ุฑุงุจุท ฺฉุงุฑุจุฑ.
- ุฏุฑ ุขูุฏู ุงูฺฉุงู ฺฏุณุชุฑุด ุณุงุฏูโุชุฑ (ูุซู ุงุญุฑุงุฒ ููุชุ ูุณุฑูุง ุจุดุชุฑ ุง ุชูุงุจุน delete/update) ูุฑุงูู ูโุดูุฏ.

---

#### ๐จ 4. ููุงููฺฏ ุจุง Canvas ุจุฑุง ูพุดุชุจุงู ุงุฒ ุงุดฺฉุงู ุฏุฑุงูุชโุดุฏู ุงุฒ ุณุฑูุฑ

ุฏุฑ ูุงู `Canvas.tsx` ุชุบุฑุงุช ุงุฌุงุฏ ุดุฏ ุชุง ุงุดฺฉุงู ุจุงุฑฺฏุฐุงุฑโุดุฏู ุงุฒ ุณุฑูุฑ (ฺฉู ูุงูุฏ `id` ฺฉุชุง ูุณุชูุฏ) ุจุฑุง ุนููฺฉุฑุฏ drag/delete ูุงุจู ุงุณุชูุงุฏู ุจุงุดูุฏ. ุงู ฺฉุงุฑ ุจุง ุงูุฒูุฏู `uuid` ุฌุฏุฏ ุจุฑุง ูุฑ ุดฺฉู ุงูุฌุงู ุดุฏู ุงุณุช:

```tsx
const loadedShapes = fetched.shapes.map(s => ({
  ...s,
  id: uuidv4() // ุงุฌุงุฏ ุดูุงุณู ฺฉุชุง ุฏุฑ frontend
}));
```

๐ธ ุฏูู:
- ฺูู ุงุดฺฉุงู ุณูุช ุณุฑูุฑ ููุท ูุฎุชุตุงุช ู ููุน ุฏุงุฑูุฏุ ู `id` ูุงุฒู ุจุฑุง ุนููุงุช ุฏุงุฎู frontend ูุซู ุฌุงุจุฌุง ู ุญุฐู ุงุณุชุ ฺฉ ุดูุงุณู ุฏุฑ ุณูุช frontend ุงุถุงูู ูโุดูุฏ.

---

## โ Backend ุจุง Spring Boot ู PostgreSQL

### ๐ฆ ุณุงุฎุชุงุฑ ฺฉู

```
src/main/java/com/example/drawing/
โโโ controller/       โ ฺฉูุชุฑูุฑ REST ุจุฑุง ุงุฑุชุจุงุท API
โโโ service/          โ ููุทู ุชุฌุงุฑ ุจุฑูุงูู (Business Logic)
โโโ model/            โ ูุฏูโูุง JPA ุจุฑุง ุชุนุฑู ุฌุฏุงูู ุฏุชุงุจุณ
โโโ repository/       โ ุชุนุฑู ูุชุฏูุง ุงุฑุชุจุงุท ุจุง ุฏุชุงุจุณ
โโโ init/             โ ููุฏุงุฑุฏู ุงููู ฺฉุงุฑุจุฑุงู ูพุดโูุฑุถ
โโโ DrawingApplication.java โ ููุทู ุดุฑูุน ุจุฑูุงูู
```

### ๐ ูุฏูโูุง (Entities)

#### `User.java`
```java
@Entity
public class User {
    @Id
    private String username;
}
```
- `@Entity`: ุงู ฺฉูุงุณ ุจู ฺฉ ุฌุฏูู ูุงูุน ุฏุฑ ุฏุชุงุจุณ ูฺฏุงุดุช ูโุดูุฏ.

- `@Id`: ูุดุฎุต ูโฺฉูุฏ ฺฉู username ฺฉูุฏ ุงุตู (Primary Key) ุฌุฏูู ุงุณุช.

- ุจุฏูู @GeneratedValueุ ฺูู ฺฉูุฏ ุฏุณุช ุชุนุฑู ุดุฏู (ูุงู ฺฉุงุฑุจุฑ)ุ ูุงุฒ ุจู auto-increment ูุณุช.

#### `Shape.java`
```java
@Entity
@Table(name = "shapes")
public class Shape {
    @Id @GeneratedValue
    private Long id;
    private String username, drawingName, type;
    private int x, y;
}
```
- `@Entity`: ุงู ฺฉูุงุณ ุจู ุฌุฏูู shapes ูุชุตู ุงุณุช.

- `@Table`(name = "shapes"): ูุงู ุฌุฏูู ุฏุฑ ุฏุชุงุจุณ ุฑุง ุตุฑุงุญุชุงู ูุดุฎุต ูโฺฉูุฏ.

- `@Id` + `@GeneratedValue`: ุณุชูู id ุจู ุนููุงู ฺฉูุฏ ุงุตู ุจุง ููุฏุงุฑ auto-increment ุชุนุฑู ุดุฏู.

- `username ู drawingName`: ุจุฑุง ุงุฑุชุจุงุท ุจู ุดฺฉูโูุง ู ฺฉุงุฑุจุฑุงู/ุชุฑุณูโูุง ุงุณุชูุงุฏู ูโุดููุฏ.

### ๐ `repository/`

```java
public interface ShapeRepository extends JpaRepository<Shape, Long> {
    List<Shape> findByUsername(String username);
    void deleteByUsername(String username);
}
```
- ุงุฑุซโุจุฑ ุงุฒ JpaRepository: ูุชุฏูุง CRUD ูุงููุฏ save, findAll, delete ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ูุฑุงูู ูโุดููุฏ.
- findByUsername ู deleteByUsername: Spring Data JPA ุงู ุชูุงุจุน ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุงูโฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ queryูุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.

### ๐ง `DrawingService.java`

```java
@Service
public class DrawingService {
    public Drawing load(String username) { ... }
    @Transactional
    public void save(Drawing drawing) { ... }
}
```
- `@Service`: ุงู ฺฉูุงุณ ฺฉ ุฌุฒุก ููุทู (logic layer) ุงุณุชุ ูู ฺฉูุชุฑูุฑ ู ูู ุฏุชุงุจุณ.

- `load(...)`: ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ null ุจุฑูโฺฏุฑุฏุงูุฏ. ุฏุฑ ุบุฑ ุงูโุตูุฑุชุ ุชูุงู ุงุดฺฉุงู ูุฑุจูุท ุจู ฺฉุงุฑุจุฑ ุฑุง ุงุฒ ุฏุชุงุจุณ ูโฺฏุฑุฏ.

- `save(...)`:

- ุงฺฏุฑ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุงุณุชุ ุณุงุฎุชู ูโุดูุฏ.

- ูููโ ุงุดฺฉุงู ูุจู ุญุฐู ูโุดููุฏ.

- ุงุดฺฉุงู ุฌุฏุฏ ุจู ูุงู ฺฉุงุฑุจุฑ ู ุชุฑุณู ุงุถุงูู ูโุดููุฏ.

- `@Transactional`: ุชุถูู ูโฺฉูุฏ ฺฉู ุนููุงุช ุญุฐู ู ุงูุฒูุฏู ุจู ุตูุฑุช ฺฉุฌุง (ุงุชู) ุงูุฌุงู ุดูุฏ. ุงฺฏุฑ ุฎุทุง ูพุด ุจุงุฏุ ููู ฺุฒ ุจู ุนูุจ ุจุฑูโฺฏุฑุฏุฏ.

### ๐ `DrawingController.java`

```java
@RestController
@RequestMapping("/api/drawings")
@CrossOrigin(origins = "http://localhost:3000")
public class DrawingController {
    @GetMapping("/{username}") ...
    @PostMapping("/{username}") ...
}
```
- @RestController: ุชุฑฺฉุจ ุงุฒ @Controller ู @ResponseBodyุ ุจุฑุง ุงุฌุงุฏ API ฺฉู JSON ุจุฑูโฺฏุฑุฏุงูุฏ.

- @RequestMapping("/api/drawings"): ูุณุฑ ูพุงูโ ุชูุงู endpointูุง.

- @CrossOrigin(...): ุงุฌุงุฒูโ ุฏุฑุฎูุงุณุช ุงุฒ frontend (ูพูุฑุช ณฐฐฐ) ุฑุง ูโุฏูุฏ (CORS policy).

- @GetMapping("/{username}"): ุจุงุฑฺฏุฐุงุฑ ุชุฑุณูโูุง ุงุฒ ุณุฑูุฑ.

- @PostMapping("/{username}"): ุฐุฎุฑูโุณุงุฒ ุชุฑุณู ุฌุฏุฏ ุฏุฑ ุณุฑูุฑ.

- @PathVariable: ูุงู ฺฉุงุฑุจุฑ ุงุฒ URL ฺฏุฑูุชู ูโุดูุฏ.

- @RequestBody: ุฏุงุฏูโ JSON ูุฑูุฏ ุฑุง ุจู ฺฉ ุด Drawing ุชุจุฏู ูโฺฉูุฏ.

- ResponseEntity: ุงูฺฉุงู ุจุงุฒฺฏุดุช ุฏูู ูพุงุณุฎ (ูุซู 404 ุง 200) ุฑุง ูุฑุงูู ูโฺฉูุฏ.

### ๐งช `UserDataInitializer.java`

```java
@Component
public class UserDataInitializer implements CommandLineRunner {
    public void run(...) {
        List.of("user1", "user2", "user3").forEach(...);
    }
}
```


- @Component: ุงู ฺฉูุงุณ ุชูุณุท Spring ุฏุฑ ุฒูุงู ุงุฌุฑุง ุงุณฺฉู ูโุดูุฏ.

- `CommandLineRunner`: ุงุฌุฑุง ูุชุฏ run() ุจูุงูุงุตูู ุจุนุฏ ุงุฒ ุดุฑูุน ุจุฑูุงูู.

- ูุฏู: ุงุทููุงู ุงุฒ ุงูฺฉู user1, user2, user3 ููุดู ุฏุฑ ุฏุชุงุจุณ ููุฌูุฏูุฏ.
---

## ๐งช ูพุงฺฏุงูโุฏุงุฏู

- ุงุฒ PostgreSQL ุจุฑุง ุฐุฎุฑูโ ุงุทูุงุนุงุช ุงุณุชูุงุฏู ุดุฏู.
- ุจุง ฺฉูฺฉ Spring Data JPA ุนููุงุช ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ ุงูุฌุงู ูโุดูุฏ.

---


## ๐งพ ุฌูุนโุจูุฏ

ูพุฑูฺู ูุดุงู ูโุฏูุฏ ฺุทูุฑ ูโุชูุงู ุจุง React ู Spring Boot ฺฉ ุจุฑูุงููโ ุชุนุงูู ุจุง ูุงุจูุช ุฐุฎุฑูโุณุงุฒ ุฏุงุฏู ุณูุช ุณุฑูุฑ ุงุฌุงุฏ ฺฉุฑุฏ. ูุนูุงุฑ ูุงฺููุงุฑ frontend ู backend ุจุงุนุซ ุชูุณุนูโูพุฐุฑ ุณุงุฏูโุชุฑ ูโุดูุฏ.

ุฏุฑ ุฑููุฏ ุชูุณุนูุ ุงุฒ ูุฏู ChatGPT ุจุฑุง ุฑุงูููุง ุฏุฑ ุงุชุตุงู frontend ุจู backendุ ุทุฑุงุญ APIุ ุงุณุชูุงุฏูโ ุฏุฑุณุช ุงุฒ JPA  ุงุณุชูุงุฏู ุดุฏ
